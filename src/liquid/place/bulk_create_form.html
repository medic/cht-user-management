<form id="form_place_create" class="data-form" hx-encoding='multipart/form-data' autocomplete="off"
  hx-post="/place?op=bulk&type={{contactType.name}}" hx-disabled-elt="button#place_create_submit, a#cancel"
  hx-on="htmx:beforeRequest:clearErrorMsg('bulk-upload-error')"
  hx-indicator="#upload-spinner" hx-target="this" hx-swap="outerHTML">
  <input name="place_type" value="{{contactType.name}}" hidden />

  {% if errors %}
  <div id="bulk-upload-error" class="error-bg white-text error-message">
    {{errors.message}}
  </div>
  {% endif %}

  <div class="file-input" id="bulk-upload-file">
    <input type="file" name="resume">
  </div>

  <div>
    <button id="place_create_submit" class="btn">
      Add <span id="upload-spinner" class="spinner-sm btn-spinner"></span>
    </button>
    <a href="/" id="cancel" class="clear-btn">Cancel</a>
  </div>

  <div class="table-container">
    <table class="info-table">
      <thead>
        <tr>
          <th>Expected Column</th>
          <th>Required</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td data-label="Expected Column">{{ contactType.replacement_property.friendly_name }}</td>
          <td data-label="Required">false</td>
          <td data-label="Description">Name of a <i>{{ contactType.friendly }} to replace</i> (leave blank to create new)</td>
        </tr>

        {% for row in contactType.hierarchy %}
        <tr>
          <td data-label="Expected Column">{{ row.friendly_name }}</td>
          <td data-label="Required">{{ row.required }}</td>
          <td data-label="Description">Name of place {{ row.level }} above in hierarchy</td>
        </tr>
        {% endfor %}

        {% for row in contactType.place_properties %}
        {% if row.type != 'generated' %}
        <tr>
          <td data-label="Expected Column">{{ row.friendly_name }}</td>
          <td data-label="Required">{{ row.required }}</td>
          <td data-label="Description">Property on place</td>
        </tr>
        {% endif %}
        {% endfor %}

        {% for row in contactType.contact_properties %}
        {% if row.type != 'generated' %}
        <tr>
          <td data-label="Expected Column">{{ row.friendly_name }}</td>
          <td data-label="Required">{{ row.required }}</td>
          <td data-label="Description">Property on primary contact</td>
        </tr>
        {% endif %}
        {% endfor %}

        {% if contactType.user_role.size > 1 %}
        <tr>
          <td data-label="Expected Column">{{ userRoleProperty.friendly_name }}</td>
          <td data-label="Required">{{ userRoleProperty.required }}</td>
          <td data-label="Description">Role of the user. Separate multiple roles with a <i>space</i>. Allowed roles are <i>{{
              contactType.user_role | join: ', ' }}
          </td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>

  <div>
    Don't have a template? <a href="/files/template/{{contactType.name}}"
    download="{{contactType.name}}.tmpl.csv">Download Template</a>
  </div>
</form>
