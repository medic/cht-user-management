<form
  id="form_place_move" 
  autocomplete="off"
  {% if backend %} hx-post="{{backend}}" {%else%} hx-post="/move" {%endif%}
  hx-target="this" 
  hx-swap="outerHTML"
  hx-post-end="handleResponse"
>
  {% if error %}
    <div class="notification is-danger" style="margin: 0;">
      {{ error }}
    </div>
  {% endif %}

  <input name="place_type" value="{{contactType.name}}" hidden />

  <section class="section is-small">
    <h1 class="subtitle">From</h1>
    {% for hierarchy in fromHierarchy %}
      {%
        include "components/search_input.html"
          type=contactType.name
          hierarchy=hierarchy
          data=data
          required=hierarchy.required
          prefix="from_"
      %}
    {% endfor %}
  </section>
  <section class="section is-small">
    <h1 class="subtitle">To</h1>
    {% for hierarchy in toHierarchy %}
      {%
        include "components/search_input.html"
          type=contactType.name
          hierarchy=hierarchy
          data=data
          required=hierarchy.required
          prefix="to_"
      %}
    {% endfor %}
  </section>
  <div class="field is-grouped is-grouped-right">
    <div class="control">
      <button id="place_create_submit" class="button is-link">Move</button>
      <a href="/" class="button">Cancel</a>
    </div>
  </div>
</form>

<script type="text/javascript">
  function handleResponse(event) {
    console.log('Event', event);
    if (!event.error) {
      // Reset form
      const $form = document.getElementById('form_place_move');
      $form.reset();

      // Show toast
      const toastContent = `
        <p>This will be moved shortly!  It may take up to 24 hours to process.</p>
      `;

      bulmaToast.toast({
        message: toastContent,
        type: 'is-success',
        position: 'center',
        closeOnClick: true,
        pauseOnHover: true,
      });
    }
  }
</script>